<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë©˜ë¯¸ì¹˜(éººé“) - ëŒ€ë™ì—¬ì§€ë„</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@300;500;700;900&display=swap" rel="stylesheet">
    
    <script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=9112aa4b875e3aa696112272cf0f17af"></script>

    <style>
        /* ==================== ìŠ¤íƒ€ì¼ (CSS) ==================== */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        :root {
            --bg-paper: #fdfbf7; --gold-pine: #d4af37; --ink-black: #0f0f0f;
            --font-main: 'Noto Serif KR', serif;
        }
        body {
            background-color: var(--bg-paper);
            background-image: url("https://www.transparenttextures.com/patterns/cream-paper.png");
            color: var(--ink-black); font-family: var(--font-main);
            display: flex; justify-content: center; height: 100vh; overflow: hidden;
        }
        .container {
            width: 100%; max-width: 480px; background: #fff;
            border-left: 3px double var(--gold-pine); border-right: 3px double var(--gold-pine);
            position: relative; height: 100%;
        }

        /* ë²šê½ƒ íš¨ê³¼ */
        .cherry-blossoms span {
            position: absolute; width:8px; height:8px; background:#ffb7b2; border-radius:50% 0 50% 50%;
            opacity:0; z-index:100; pointer-events: none; animation:fall linear infinite;
        }
        @keyframes fall { 0% {opacity:0; transform:translateY(-10%)} 20%{opacity:0.8} 100%{opacity:0; transform:translateY(800px) rotate(360deg)} }

        /* ì§€ë„ í™”ë©´ */
        #map-view { width: 100%; height: 100%; position: relative; }
        .map-header {
            position: absolute; top: 20px; left: 20px; z-index: 20;
            background: rgba(255,255,255,0.95); padding: 12px 20px; border-radius: 8px;
            border: 1px solid var(--gold-pine); box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }
        .map-header h1 { font-size: 1.4rem; font-weight: 900; margin: 0; letter-spacing: -1px; }
        .map-header p { font-size: 0.8rem; color: #666; margin: 4px 0 0; font-weight: 500; }
        #main-map { width: 100%; height: 100%; }
        
        /* ğŸ¥˜ í•„í„° ë²„íŠ¼ */
        .filter-bar {
            position: absolute; top: 90px; left: 0; width: 100%; z-index: 20;
            padding: 0 15px; display: flex; gap: 8px; overflow-x: auto;
            white-space: nowrap; scrollbar-width: none;
        }
        .filter-bar::-webkit-scrollbar { display: none; }
        .filter-btn {
            background: rgba(255,255,255,0.95); border: 1px solid #ddd;
            border-radius: 20px; padding: 6px 14px; font-size: 0.8rem; font-weight: 700;
            color: #555; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: all 0.2s; font-family: var(--font-main);
        }
        .filter-btn.active {
            background: var(--ink-black); color: #fff; border-color: var(--ink-black);
        }

        /* ğŸ“ ì§€ë„ ë§ˆì»¤ (ì‹¬í”Œí•œ ê¸ˆìƒ‰ ì ) */
        .customoverlay { 
            position: absolute; left: 0; bottom: 0; 
            width: 20px; height: 20px;
            cursor: pointer; 
            transform: translate(-50%, -50%); 
            z-index: 10;
        }
        .gold-dot {
            width: 100%; height: 100%;
            background-color: var(--gold-pine); border: 2px solid #fff;
            border-radius: 50%; box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .customoverlay:hover .gold-dot {
            transform: scale(1.8); background-color: #ffd700; box-shadow: 0 0 15px rgba(255, 215, 0, 0.8); z-index: 100;
        }

        /* ìƒì„¸ í˜ì´ì§€ */
        #detail-view {
            position: absolute; bottom: 0; left: 0; width: 100%; height: 85%;
            background: rgba(255,255,255,0.98);
            border-top-left-radius: 20px; border-top-right-radius: 20px;
            box-shadow: 0 -10px 40px rgba(0,0,0,0.2);
            z-index: 50; overflow-y: auto; padding-bottom: 40px;
            transition: transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        #detail-view.hidden { transform: translateY(110%); }
        .btn-back {
            width: 100%; padding: 15px; border: none; background: #fff;
            font-weight: 700; color: var(--gold-pine); cursor: pointer;
            border-bottom: 1px dashed #eee; position: sticky; top: 0; z-index: 10;
        }
        /* ìƒì„¸ ë‚´ìš© */
        .detail-header { padding: 30px 30px 10px; text-align: left; }
        .shop-badge { border:1px solid var(--gold-pine); color:var(--gold-pine); padding:4px 10px; font-size:0.75rem; border-radius:50px; background:#fff; font-weight:700;}
        h1#detail-title { font-size:1.8rem; margin:12px 0; font-weight:900; letter-spacing: -1px;}
        .shop-info { color:#666; font-size:0.95rem; }
        .lantern-icon { color:#c41e3a; font-size:1.4rem; vertical-align:middle; filter:drop-shadow(0 0 5px #c41e3a); margin-left:5px; }
        
        /* ì—¬ê¶Œ ì¸ì¦ */
        .passport-section { padding: 10px 30px; margin-top: 10px; text-align: center; }
        .btn-passport { width: 100%; padding: 12px; border: 2px dashed #ccc; background: #f9f9f9; color: #888; font-weight: 700; border-radius: 8px; cursor: pointer; transition: all 0.3s; }
        .btn-passport.verified { background: #fff; border: 2px solid var(--gold-pine); color: var(--gold-pine); box-shadow: 0 0 10px rgba(212, 175, 55, 0.3); }
        .passport-msg { font-size: 0.8rem; color: #999; margin-top: 5px; }

        /* ë„ì¥ */
        .stamp-section { padding: 20px 30px; }
        .stamp-grid { display:flex; flex-direction:column; gap:14px; }
        .stat-row { display:flex; justify-content:space-between; align-items:center; }
        .stat-label { font-size:0.95rem; font-weight:700; width:30%; text-align:right; padding-right:15px; color: #333; }
        .stat-stamps { display:flex; gap:6px; width:70%; }
        .stamp { width:22px; height:22px; border:2px solid #ddd; border-radius:50%; transition: all 0.3s; }
        .stamp.filled { background:#c41e3a; border-color:#c41e3a; box-shadow:0 0 5px #c41e3a; transform: scale(1.1); }
        .flavor-text { text-align:center; font-style:italic; color:#666; margin-top:30px; font-weight: 500; font-size: 1rem; }
        
        /* ë²„íŠ¼ */
        .revenue-section { padding: 30px 20px; border-top: 2px dotted var(--gold-pine); background: rgba(255,248,225,0.5); margin-top: 20px; }
        .btn { width: 100%; padding: 16px; border-radius: 8px; border: none; margin-bottom: 12px; cursor: pointer; font-weight: 700; font-size: 1rem; }
        .btn-affiliate { background: #0f0f0f; color: #fff; display: flex; flex-direction: column; align-items: center; text-decoration: none; }
        .btn-donation { background: #fff; color: var(--gold-pine); border: 2px solid var(--gold-pine); display: flex; flex-direction: column; align-items: center; }
        .sub-text { font-size: 0.75rem; font-weight: 400; margin-top: 4px; opacity: 0.8; }
        .sub-text-gold { color: var(--gold-pine); opacity: 1; font-weight: 500; }
    </style>
</head>
<body>

    <div class="container">
        <div class="cherry-blossoms" id="cherry-container"></div>

        <div id="map-view">
            <header class="map-header">
                <h1>ë©˜ë¯¸ì¹˜ (éººé“)</h1>
                <p>ì „êµ­ ë¼ë©˜ ëŒ€ë™ì—¬ì§€ë„</p>
            </header>
             <div class="filter-bar">
                <button class="filter-btn" onclick="filterMap('all')">ì „ì²´</button>
                <button class="filter-btn" onclick="filterMap('ëˆì½”ì¸ ')">ëˆì½”ì¸ </button>
                <button class="filter-btn" onclick="filterMap('ì‹œì˜¤ì‡¼ìœ ')">ì‹œì˜¤/ì‡¼ìœ </button>
                <button class="filter-btn" onclick="filterMap('ë§ˆì œíƒ„íƒ„')">ë§ˆì œ/íƒ„íƒ„</button>
                <button class="filter-btn" onclick="filterMap('ê¸°íƒ€')">ê¸°íƒ€</button>
            </div>
            <div id="main-map"></div>
        </div>

        <div id="detail-view" class="hidden">
            <button class="btn-back" onclick="closeDetail()">â†“ ì§€ë„ ë‹«ê¸°</button>
            <header class="detail-header">
                <span class="shop-badge" id="detail-badge"></span>
                <h1 id="detail-title"></h1>
                <div class="shop-info" id="detail-desc"></div>
            </header>
            
            <div class="passport-section">
                <button id="btn-verify" class="btn-passport" onclick="verifyVisit()">
                    ğŸ“ ê°€ê²Œ ë°©ë¬¸ ì¸ì¦í•˜ê¸° (ë„ì¥ ì¾…!)
                </button>
                <p class="passport-msg" id="passport-msg">ì•„ì§ ë°©ë¬¸í•˜ì§€ ì•Šì€ ìˆ˜í–‰ì§€ì…ë‹ˆë‹¤.</p>
            </div>

            <section class="stamp-section">
                <h2>ë©´ì‹ ìˆ˜í–‰ ëŠ¥ë ¥ì¹˜ (éººé£ŸåŠ›)</h2>
                <div class="stamp-grid" id="ramen-stats"></div>
                <p class="flavor-text" id="detail-flavor"></p>
            </section>
            <section class="revenue-section">
                <a href="https://www.coupang.com" target="_blank" class="btn btn-affiliate">
                    ğŸ  ì§‘ì—ì„œ ì¦ê¸°ëŠ” <b>'ì´ì¹˜ë€ ë¼ë©˜'</b>
                    <span class="sub-text">(ë¡œì¼“ë°°ì†¡ ìµœì €ê°€ í™•ì¸)</span>
                </a>
                <button class="btn btn-donation">
                    â˜• ê°œë°œìì—ê²Œ <b>'ê³µê¸°ë°¥'</b> ì¶”ê°€
                    <span class="sub-text sub-text-gold">(í›„ì› ì‹œ 'í™©ê¸ˆ í™ë“±' íšë“)</span>
                </button>
            </section>
        </div>
    </div>

    <script>
        const ramenDB = [
            { id: 1, type: "ê¸°íƒ€", name: "ì˜¤ë ˆë…¸(í•©ì •)", lat: 37.5486, lng: 126.9135, badge: "ë¯¸ìŠë­ ë¹• êµ¬ë¥´ë§", location: "ì„œìš¸ í•©ì • â€¢ í† ë¦¬íŒŒì´íƒ„", flavor: "ì§„í•˜ê³  í¬ë¦¬ë¯¸í•œ ë‹­ ë°±íƒ•ì˜ ì •ìˆ˜", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:5},{l:"ë©´",s:2},{l:"í† í•‘",s:3},{l:"í’ë¯¸",s:4}] },
            { id: 2, type: "ëˆì½”ì¸ ", name: "ì‡í…ê³ ", lat: 37.5492, lng: 126.9128, badge: "ì¸ê¸°", location: "ì„œìš¸ í•©ì • â€¢ ë°”ì§ˆë¼ë©˜", flavor: "í–¥ê¸‹í•œ ë°”ì§ˆê³¼ ëˆì½”ì¸ ì˜ ì¶©ê²©ì  ì¡°í™”", stats: [{l:"ì—¼ë„",s:3},{l:"ë†ë„",s:3},{l:"ë©´",s:2},{l:"í† í•‘",s:4},{l:"í’ë¯¸",s:5}] },
            { id: 3, type: "ì‹œì˜¤ì‡¼ìœ ", name: "ë‹´íƒ", lat: 37.5505, lng: 126.9155, badge: "ë¯¸ìŠë­ ë¹• êµ¬ë¥´ë§", location: "ì„œìš¸ í•©ì • â€¢ ì‹œì˜¤ë¼ë©˜", flavor: "ê¹”ë”í•˜ê³  ê¹Šì€ ì†Œê¸ˆ ìœ¡ìˆ˜ì˜ ëíŒì™•", stats: [{l:"ì—¼ë„",s:3},{l:"ë†ë„",s:2},{l:"ë©´",s:3},{l:"í† í•‘",s:3},{l:"í’ë¯¸",s:4}] },
            { id: 4, type: "ëˆì½”ì¸ ", name: "í•˜ì¿ í…", lat: 37.5615, lng: 126.9255, badge: "ì›¨ì´íŒ… í•„ìˆ˜", location: "ì„œìš¸ ì—°ë‚¨ â€¢ ì´ì—ì¼€", flavor: "ë°¥ì„ ë¶€ë¥´ëŠ” ê¾¸ë•í•œ ì´ì—ì¼€(ê°€ì •ì‹)", stats: [{l:"ì—¼ë„",s:5},{l:"ë†ë„",s:5},{l:"ë©´",s:4},{l:"í† í•‘",s:5},{l:"í’ë¯¸",s:5}] },
            { id: 5, type: "ê¸°íƒ€", name: "566ë¼ë©˜", lat: 37.5635, lng: 126.9248, badge: "ë§¤ë‹ˆì•„ ì „ìš©", location: "ì„œìš¸ ì—°ë‚¨", flavor: "ì••ë„ì ì¸ ì–‘ê³¼ ê¸°ë¦„, ë§ˆëŠ˜ì˜ ì§€ë¡œê³„", stats: [{l:"ì—¼ë„",s:5},{l:"ë†ë„",s:5},{l:"ë©´",s:5},{l:"í† í•‘",s:5},{l:"í’ë¯¸",s:5}] },
            { id: 6, type: "ì‹œì˜¤ì‡¼ìœ ", name: "ì‚¬ë£¨ì¹´ë©”", lat: 37.5618, lng: 126.9265, badge: "ë°”ì§€ë½ ìœ¡ìˆ˜", location: "ì„œìš¸ ì—°ë‚¨", flavor: "ë°”ì§€ë½ì˜ ì‹œì›í•¨ê³¼ ì‡¼ìœ ì˜ ê°ì¹ ë§›", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:2},{l:"ë©´",s:3},{l:"í† í•‘",s:4},{l:"í’ë¯¸",s:5}] },
            { id: 7, type: "ì‹œì˜¤ì‡¼ìœ ", name: "ë§ˆì‹œíƒ€ì•¼", lat: 37.5552, lng: 126.9245, badge: "ë¸”ë™ë¼ë©˜", location: "ì„œìš¸ í™ëŒ€", flavor: "ê¹Šì€ í’ë¯¸ì˜ ë¸”ë™ ì‡¼ìœ  ë¼ë©˜", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:3},{l:"ë©´",s:3},{l:"í† í•‘",s:3},{l:"í’ë¯¸",s:4}] },
            { id: 8, type: "ê¸°íƒ€", name: "ì´ë¦¬ì—", lat: 37.5495, lng: 126.9142, badge: "ë„ë¯¸ ìœ¡ìˆ˜", location: "ì„œìš¸ í•©ì •", flavor: "ë„ë¯¸ë¥¼ í†µì§¸ë¡œ ë„£ì€ ì§„í•œ ìƒì„  ìœ¡ìˆ˜", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:4},{l:"ë©´",s:2},{l:"í† í•‘",s:3},{l:"í’ë¯¸",s:5}] },
            { id: 9, type: "ëˆì½”ì¸ ", name: "ë¼ë©˜íŠ¸ëŸ­", lat: 37.5475, lng: 126.9225, badge: "ì…ë¬¸ì ì¶”ì²œ", location: "ì„œìš¸ ìƒìˆ˜", flavor: "í˜¸ë¶ˆí˜¸ ì—†ëŠ” ë‹´ë°±í•œ ëˆì½”ì¸ ", stats: [{l:"ì—¼ë„",s:3},{l:"ë†ë„",s:3},{l:"ë©´",s:2},{l:"í† í•‘",s:5},{l:"í’ë¯¸",s:3}] },
            { id: 10, type: "ì‹œì˜¤ì‡¼ìœ ", name: "ë©˜ì•¼ì¤€", lat: 37.5568, lng: 126.9165, badge: "ì‹œì›í•¨", location: "ì„œìš¸ ì„œêµ", flavor: "ê¹”ë”í•˜ê³  ë§‘ì€ ì‹œì˜¤ ë¼ë©˜", stats: [{l:"ì—¼ë„",s:3},{l:"ë†ë„",s:1},{l:"ë©´",s:2},{l:"í† í•‘",s:3},{l:"í’ë¯¸",s:4}] },
            { id: 11, type: "ëˆì½”ì¸ ", name: "ì¿„ë¼ë©˜", lat: 37.5630, lng: 126.9250, badge: "ëˆì½”ì¸  ì •ì„", location: "ì„œìš¸ ì—°ë‚¨", flavor: "ëƒ„ìƒˆ ì—†ì´ ì§„êµ­ì¸ ëˆì½”ì¸  ë¼ë©˜", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:5},{l:"ë©´",s:1},{l:"í† í•‘",s:3},{l:"í’ë¯¸",s:3}] },
            { id: 12, type: "ì‹œì˜¤ì‡¼ìœ ", name: "ì„¸ìƒëì˜", lat: 37.5508, lng: 126.9148, badge: "ê°ì„±", location: "ì„œìš¸ í•©ì •", flavor: "ì˜¤ì‚¬ì¹´ ìŠ¤íƒ€ì¼ì˜ ë§‘ì€ ì¤‘í™”ì†Œë°”", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:2},{l:"ë©´",s:3},{l:"í† í•‘",s:3},{l:"í’ë¯¸",s:4}] },
            { id: 13, type: "ë§ˆì œíƒ„íƒ„", name: "ì¹¸ë‹¤ì†Œë°”", lat: 37.5772, lng: 126.9725, badge: "ë§ˆì œ ë³¸ì¢Œ", location: "ì„œìš¸ ê²½ë³µê¶", flavor: "62ê°€ì§€ ì¬ë£Œê°€ í­ë°œí•˜ëŠ” ë§ˆì œì†Œë°”", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:5},{l:"ë©´",s:5},{l:"í† í•‘",s:5},{l:"í’ë¯¸",s:5}] },
            { id: 14, type: "ë§ˆì œíƒ„íƒ„", name: "ë©˜í…", lat: 37.5612, lng: 126.9882, badge: "ë¯¸ìŠë­", location: "ì„œìš¸ ëª…ë™", flavor: "ì¥ì¸ì´ ë§Œë“œëŠ” íƒ„íƒ„ë©˜ ì˜ˆìˆ ", stats: [{l:"ì—¼ë„",s:3},{l:"ë†ë„",s:3},{l:"ë©´",s:3},{l:"í† í•‘",s:4},{l:"í’ë¯¸",s:4}] },
            { id: 15, type: "ëˆì½”ì¸ ", name: "ì˜¤ë ˆë…¸(ê°•ë‚¨)", lat: 37.4985, lng: 127.0285, badge: "ê°•ë‚¨ì ", location: "ì„œìš¸ ê°•ë‚¨", flavor: "ê°•ë‚¨ì—ì„œë„ ì¦ê¸°ëŠ” ì˜¤ë ˆë…¸ì˜ ë§›", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:5},{l:"ë©´",s:2},{l:"í† í•‘",s:3},{l:"í’ë¯¸",s:4}] },
            { id: 16, type: "ê¸°íƒ€", name: "ìœ ì¦ˆë¼ë©˜", lat: 37.5548, lng: 126.9675, badge: "ìœ ìí–¥", location: "ì„œìš¸ ì„œìš¸ì—­", flavor: "ìœ ì ì°©ì¦™ì•¡ì„ ë„£ì€ ìƒí¼í•œ ë¼ë©˜", stats: [{l:"ì—¼ë„",s:3},{l:"ë†ë„",s:2},{l:"ë©´",s:1},{l:"í† í•‘",s:4},{l:"í’ë¯¸",s:5}] },
            { id: 17, type: "ì‹œì˜¤ì‡¼ìœ ", name: "ë¶€íƒ„ì¸„", lat: 37.5565, lng: 126.9355, badge: "ì»¤ìŠ¤í…€", location: "ì„œìš¸ ì‹ ì´Œ", flavor: "ë‚´ ë§˜ëŒ€ë¡œ ë©´ê³¼ ì†ŒìŠ¤ë¥¼ ê³ ë¥´ëŠ” ì¬ë¯¸", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:4},{l:"ë©´",s:3},{l:"í† í•‘",s:4},{l:"í’ë¯¸",s:3}] },
            { id: 18, type: "ëˆì½”ì¸ ", name: "ê°€ë§ˆë§ˆë£¨ì´", lat: 37.5585, lng: 126.9368, badge: "ë¬´í•œë¦¬í•„", location: "ì„œìš¸ ì‹ ì´Œ", flavor: "ë°¥ê³¼ ë§ˆíŒŒë‘ë¶€ê°€ ê³µì§œì¸ ê°€ì„±ë¹„ ë§›ì§‘", stats: [{l:"ì—¼ë„",s:3},{l:"ë†ë„",s:4},{l:"ë©´",s:1},{l:"í† í•‘",s:3},{l:"í’ë¯¸",s:3}] },
            { id: 19, type: "ëˆì½”ì¸ ", name: "ë‚˜ê°€í•˜ë§ˆ", lat: 35.1633, lng: 129.1595, badge: "ë¶€ì‚° 1í‹°ì–´", location: "ë¶€ì‚° í•´ìš´ëŒ€", flavor: "36ì‹œê°„ ê³ ì•„ë‚¸ ì •í†µ í•˜ì¹´íƒ€ ëˆì½”ì¸ ", stats: [{l:"ì—¼ë„",s:5},{l:"ë†ë„",s:4},{l:"ë©´",s:1},{l:"í† í•‘",s:3},{l:"í’ë¯¸",s:4}] },
            { id: 20, type: "ê¸°íƒ€", name: "ë¥˜ì„¼ì†Œ", lat: 35.1618, lng: 129.1632, badge: "êµ´ë¼ë©˜", location: "ë¶€ì‚° í•´ìš´ëŒ€", flavor: "ê²¨ìš¸ì²  ë³„ë¯¸, ì‹œì›í•œ êµ´ ìœ¡ìˆ˜ì˜ ê°ì¹ ë§›", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:2},{l:"ë©´",s:2},{l:"í† í•‘",s:4},{l:"í’ë¯¸",s:5}] },
            { id: 21, type: "ëˆì½”ì¸ ", name: "ë³µë™ì´ë„¤", lat: 35.2315, lng: 129.0845, badge: "ì˜¤ì§€ìƒ", location: "ë¶€ì‚° ë¶€ì‚°ëŒ€", flavor: "ì§„ì§œ ì¼ë³¸ì¸ì´ ë§Œë“œëŠ” ì§„í•œ ëˆì½”ì¸ ", stats: [{l:"ì—¼ë„",s:5},{l:"ë†ë„",s:5},{l:"ë©´",s:1},{l:"í† í•‘",s:3},{l:"í’ë¯¸",s:4}] },
            { id: 22, type: "ë§ˆì œíƒ„íƒ„", name: "ì¹¸ë‹¤(ì„œë©´)", lat: 35.1555, lng: 129.0615, badge: "ì›¨ì´íŒ…", location: "ë¶€ì‚° ì„œë©´", flavor: "ì„œë©´ì—ì„œë„ ì¤„ ì„œì„œ ë¨¹ëŠ” ë§ˆì œì†Œë°”", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:5},{l:"ë©´",s:5},{l:"í† í•‘",s:5},{l:"í’ë¯¸",s:5}] },
            { id: 23, type: "ì‹œì˜¤ì‡¼ìœ ", name: "ì¿ ì¹´ì´ì•¼", lat: 35.2305, lng: 129.0855, badge: "ìê°€ì œë©´", location: "ë¶€ì‚° ë¶€ì‚°ëŒ€", flavor: "ì§ì ‘ ë½‘ì€ ë©´ë°œì´ ì‚´ì•„ìˆëŠ” ê³³", stats: [{l:"ì—¼ë„",s:3},{l:"ë†ë„",s:3},{l:"ë©´",s:5},{l:"í† í•‘",s:3},{l:"í’ë¯¸",s:3}] },
            { id: 24, type: "ì‹œì˜¤ì‡¼ìœ ", name: "ì¸„ì¹´ì†Œë°”ì„¤", lat: 35.8695, lng: 128.5955, badge: "ëŒ€êµ¬ 1ë“±", location: "ëŒ€êµ¬ ì¤‘êµ¬", flavor: "ëŒ€êµ¬ ë¼ë©˜ì˜ ìì¡´ì‹¬, ë§‘ì€ ìœ¡ìˆ˜", stats: [{l:"ì—¼ë„",s:3},{l:"ë†ë„",s:2},{l:"ë©´",s:3},{l:"í† í•‘",s:4},{l:"í’ë¯¸",s:5}] },
            { id: 25, type: "ëˆì½”ì¸ ", name: "ë¼ë©˜ì™“íƒ€ì‹œ", lat: 36.3535, lng: 127.3825, badge: "ëŒ€ì „ ëª…ë¬¼", location: "ëŒ€ì „ ì„œêµ¬", flavor: "ëŒ€ì „ì—ì„œ ë§›ë³´ëŠ” ì§„í•œ êµì¹´ì´ ëˆì½”ì¸ ", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:5},{l:"ë©´",s:2},{l:"í† í•‘",s:4},{l:"í’ë¯¸",s:4}] },
            { id: 26, type: "ëˆì½”ì¸ ", name: "ì½”ì´ë¼ë©˜", lat: 37.3655, lng: 127.1065, badge: "ë¶„ë‹¹ ì¶•ë³µ", location: "ê²½ê¸° ì •ì", flavor: "í•œêµ­í˜• ëˆì½”ì¸  ë¼ë©˜ì˜ ëŒ€ì¤‘ì  ì„±ê³µ", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:4},{l:"ë©´",s:2},{l:"í† í•‘",s:3},{l:"í’ë¯¸",s:3}] },
            { id: 27, type: "ë§ˆì œíƒ„íƒ„", name: "ë©˜ì•¼í•˜ë‚˜ë¹„", lat: 37.5105, lng: 127.1125, badge: "ì›ì¡°", location: "ì„œìš¸ ì ì‹¤", flavor: "ë‚˜ê³ ì•¼ ë§ˆì œì†Œë°”ì˜ ì›ì¡°", stats: [{l:"ì—¼ë„",s:5},{l:"ë†ë„",s:5},{l:"ë©´",s:5},{l:"í† í•‘",s:5},{l:"í’ë¯¸",s:5}] },
            { id: 28, type: "ëˆì½”ì¸ ", name: "ìš°ë§ˆì´ë„", lat: 37.5405, lng: 127.0695, badge: "ê±´ëŒ€ ë§›ì§‘", location: "ì„œìš¸ ê±´ëŒ€", flavor: "ìê°€ì œë©´ í•˜ì¹´íƒ€ ëˆì½”ì¸ ì˜ í„°ì¤ëŒ€ê°", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:3},{l:"ë©´",s:1},{l:"í† í•‘",s:3},{l:"í’ë¯¸",s:3}] },
            { id: 29, type: "ê¸°íƒ€", name: "ë¬´ì‹ ", lat: 37.5482, lng: 126.9185, badge: "ë§¤ìš´ë§›", location: "ì„œìš¸ ìƒìˆ˜", flavor: "í•´ì¥ìœ¼ë¡œ ì™„ë²½í•œ ë§¤ìš´ ë¼ë©˜", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:3},{l:"ë©´",s:2},{l:"í† í•‘",s:4},{l:"í’ë¯¸",s:4}] },
            { id: 30, type: "ì‹œì˜¤ì‡¼ìœ ", name: "ì˜¤ë¡œì§€", lat: 37.5705, lng: 126.9825, badge: "ì§ì¥ì¸", location: "ì„œìš¸ ì¢…ê°", flavor: "ì ì‹¬ì‹œê°„ ì§ì¥ì¸ë“¤ì˜ ì†Œìš¸ í‘¸ë“œ", stats: [{l:"ì—¼ë„",s:3},{l:"ë†ë„",s:3},{l:"ë©´",s:2},{l:"í† í•‘",s:3},{l:"í’ë¯¸",s:3}] },
            { id: 31, type: "ì‹œì˜¤ì‡¼ìœ ", name: "ì´ì—ì¼€ë¼", lat: 37.5445, lng: 127.0565, badge: "ì„±ìˆ˜ í•«í”Œ", location: "ì„œìš¸ ì„±ìˆ˜", flavor: "ì„±ìˆ˜ë™ì—ì„œ ë§Œë‚˜ëŠ” ì°í•œ ì´ì—ì¼€", stats: [{l:"ì—¼ë„",s:5},{l:"ë†ë„",s:5},{l:"ë©´",s:4},{l:"í† í•‘",s:4},{l:"í’ë¯¸",s:4}] },
            { id: 32, type: "ëˆì½”ì¸ ", name: "ì‚¼ë°©ë§¤", lat: 37.5112, lng: 127.1085, badge: "ì›¨ì´íŒ…", location: "ì„œìš¸ ì†¡íŒŒ", flavor: "ì†¡ë¦¬ë‹¨ê¸¸ í„°ì¤ëŒ€ê°, ì§„í•œ ëˆì½”ì¸ ", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:5},{l:"ë©´",s:2},{l:"í† í•‘",s:5},{l:"í’ë¯¸",s:3}] },
            { id: 33, type: "ë§ˆì œíƒ„íƒ„", name: "ë¡œë¼ë©˜", lat: 37.5155, lng: 126.9075, badge: "ë¬¸ë˜ ì°½ì‘ì´Œ", location: "ì„œìš¸ ë¬¸ë˜", flavor: "êµì¹´ì´ ë§ˆì œì†Œë°”ì˜ ê°ì¹ ë§› í­ë°œ", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:4},{l:"ë©´",s:5},{l:"í† í•‘",s:5},{l:"í’ë¯¸",s:5}] },
            { id: 34, type: "ê¸°íƒ€", name: "ë©˜ì•¼í˜¸ì½”ë¦¬", lat: 37.5345, lng: 127.1365, badge: "ê°•ë™êµ¬ 1ë“±", location: "ì„œìš¸ ê°•ë™", flavor: "ë™ë„¤ ì£¼ë¯¼ë“¤ì´ ìˆ¨ê¸°ê³  ë¨¹ëŠ” ë§›ì§‘", stats: [{l:"ì—¼ë„",s:3},{l:"ë†ë„",s:4},{l:"ë©´",s:2},{l:"í† í•‘",s:4},{l:"í’ë¯¸",s:3}] },
            { id: 35, type: "ì‹œì˜¤ì‡¼ìœ ", name: "ë³´ë¼ë§¤", lat: 37.4925, lng: 126.9245, badge: "ì†Œìœ  ì •ì„", location: "ì„œìš¸ ì‹ ë¦¼", flavor: "ê¹”ë”í•˜ê³  ê¹Šì€ ì‡¼ìœ  ë¼ë©˜ì˜ ì •ì„", stats: [{l:"ì—¼ë„",s:3},{l:"ë†ë„",s:2},{l:"ë©´",s:3},{l:"í† í•‘",s:3},{l:"í’ë¯¸",s:4}] },
            { id: 36, type: "ê¸°íƒ€", name: "í…ë¯¸ë¯¸", lat: 37.4785, lng: 126.9815, badge: "í† ë§ˆí† ", location: "ì„œìš¸ ì‚¬ë‹¹", flavor: "ì´ìƒ‰ì ì¸ í† ë§ˆí†  ë¼ë©˜ì˜ ë§¤ë ¥", stats: [{l:"ì—¼ë„",s:3},{l:"ë†ë„",s:4},{l:"ë©´",s:3},{l:"í† í•‘",s:5},{l:"í’ë¯¸",s:5}] },
            { id: 37, type: "ì‹œì˜¤ì‡¼ìœ ", name: "ì‚¼ë¯¸ë‹¹", lat: 37.4915, lng: 126.7235, badge: "ì¸ì²œ ëŒ€ì¥", location: "ì¸ì²œ ë¶€í‰", flavor: "ì¸ì²œ ë¼ë©˜ ì”¬ì„ ì´ë„ëŠ” ë‹­ ìœ¡ìˆ˜ ì‡¼ìœ ", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:3},{l:"ë©´",s:3},{l:"í† í•‘",s:4},{l:"í’ë¯¸",s:5}] },
            { id: 38, type: "ëˆì½”ì¸ ", name: "í‚¤ì™€ë§ˆë£¨", lat: 37.2795, lng: 127.0435, badge: "ìˆ˜ì› ëª…ë¬¼", location: "ê²½ê¸° ìˆ˜ì›", flavor: "íŠ¹ëˆì½”ì¸ ì˜ ì—„ì²­ë‚œ ë°€ë„ê°", stats: [{l:"ì—¼ë„",s:5},{l:"ë†ë„",s:5},{l:"ë©´",s:1},{l:"í† í•‘",s:5},{l:"í’ë¯¸",s:3}] },
            { id: 39, type: "ëˆì½”ì¸ ", name: "ì´ì¸ ë€", lat: 37.6585, lng: 126.7725, badge: "ì¼ì‚° ë§›ì§‘", location: "ê²½ê¸° ì¼ì‚°", flavor: "í˜¸ìˆ˜ê³µì› ê·¼ì²˜ ê¹”ë”í•œ ëˆì½”ì¸ ", stats: [{l:"ì—¼ë„",s:3},{l:"ë†ë„",s:3},{l:"ë©´",s:2},{l:"í† í•‘",s:3},{l:"í’ë¯¸",s:3}] },
            { id: 40, type: "ê¸°íƒ€", name: "ì¹´ì´ë¼", lat: 37.3515, lng: 127.1075, badge: "í† ë¦¬íŒŒì´íƒ„", location: "ê²½ê¸° ë¶„ë‹¹", flavor: "ë¶„ë‹¹ì—ì„œ ë§Œë‚˜ëŠ” ì§„í•œ ë‹­ ë°±íƒ•", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:5},{l:"ë©´",s:2},{l:"í† í•‘",s:3},{l:"í’ë¯¸",s:4}] },
            { id: 41, type: "ë§ˆì œíƒ„íƒ„", name: "ë©˜ì•¼ë§ˆì¯”ë¦¬", lat: 36.8015, lng: 127.1355, badge: "ì²œì•ˆ ëª…ë¬¼", location: "ì¶©ë‚¨ ì²œì•ˆ", flavor: "í™”ë ¤í•œ ë¶ˆì‡¼ê°€ ìˆëŠ” ëˆì½”ì¸ ì™€ ë§ˆì œ", stats: [{l:"ì—¼ë„",s:3},{l:"ë†ë„",s:3},{l:"ë©´",s:3},{l:"í† í•‘",s:4},{l:"í’ë¯¸",s:3}] },
            { id: 42, type: "ê¸°íƒ€", name: "êµë ˆì¸ ", lat: 37.4912, lng: 126.7215, badge: "ë§ˆì œì†Œë°”", location: "ì¸ì²œ ë¶€í‰", flavor: "ê¾¸ë•í•¨ì˜ ëì„ ë³´ì—¬ì£¼ëŠ” ë§ˆì œì†Œë°”", stats: [{l:"ì—¼ë„",s:5},{l:"ë†ë„",s:5},{l:"ë©´",s:5},{l:"í† í•‘",s:5},{l:"í’ë¯¸",s:4}] },
            { id: 43, type: "ì‹œì˜¤ì‡¼ìœ ", name: "ìŠ¤ë°”ë¼ì‹œ", lat: 36.3615, lng: 127.3565, badge: "ëŒ€ì „ 1ì„¸ëŒ€", location: "ëŒ€ì „ ìœ ì„±", flavor: "ëŒ€ì „ ë¼ë©˜ì˜ ì‹œì¡°ìƒˆ ê²©ì¸ ê³³", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:3},{l:"ë©´",s:2},{l:"í† í•‘",s:3},{l:"í’ë¯¸",s:3}] },
            { id: 44, type: "ê¸°íƒ€", name: "ë©˜í…Œì•¼", lat: 36.8195, lng: 127.1565, badge: "ê°€ì„±ë¹„", location: "ì¶©ë‚¨ ì²œì•ˆ", flavor: "ì €ë ´í•˜ì§€ë§Œ ë§›ì€ ê²°ì½” ì €ë ´í•˜ì§€ ì•Šë‹¤", stats: [{l:"ì—¼ë„",s:3},{l:"ë†ë„",s:2},{l:"ë©´",s:3},{l:"í† í•‘",s:3},{l:"í’ë¯¸",s:3}] },
            { id: 45, type: "ê¸°íƒ€", name: "ê¾¸ë¯¸ì‹ ", lat: 35.1455, lng: 126.9215, badge: "ê´‘ì£¼ ì›íƒ‘", location: "ê´‘ì£¼ ë™ëª…", flavor: "ê´‘ì£¼ í™ìŠ¤í„°ë“¤ì´ ëª¨ì´ëŠ” í† ë¦¬íŒŒì´íƒ„", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:5},{l:"ë©´",s:2},{l:"í† í•‘",s:4},{l:"í’ë¯¸",s:4}] },
            { id: 46, type: "ëˆì½”ì¸ ", name: "ë¥˜ì¼€ì´", lat: 35.1535, lng: 126.9155, badge: "ì§„í•œ êµ­ë¬¼", location: "ê´‘ì£¼ ì¶©ì¥", flavor: "ë°¥ ë§ì•„ ë¨¹ê¸° ë”± ì¢‹ì€ ì§„í•œ êµ­ë¬¼", stats: [{l:"ì—¼ë„",s:5},{l:"ë†ë„",s:4},{l:"ë©´",s:2},{l:"í† í•‘",s:3},{l:"í’ë¯¸",s:3}] },
            { id: 47, type: "ì‹œì˜¤ì‡¼ìœ ", name: "í˜¸ì‹œë§ˆì¸ ", lat: 35.8195, lng: 127.1435, badge: "ì „ì£¼ ê°ì‚¬", location: "ì „ë¶ ì „ì£¼", flavor: "ì „ì£¼ì—ì„œ ê°€ì¥ ìœ ëª…í•œ ëˆì½”ì¸  ë¼ë©˜", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:4},{l:"ë©´",s:2},{l:"í† í•‘",s:4},{l:"í’ë¯¸",s:3}] },
            { id: 48, type: "ê¸°íƒ€", name: "ë§ˆì½”í† ", lat: 35.8705, lng: 128.5945, badge: "ì¸ ì¼€ë©˜", location: "ëŒ€êµ¬ ë™ì„±ë¡œ", flavor: "ëŒ€êµ¬ì—ì„œ ì¸ ì¼€ë©˜ í•˜ë©´ ë°”ë¡œ ì´ê³³", stats: [{l:"ì—¼ë„",s:5},{l:"ë†ë„",s:5},{l:"ë©´",s:5},{l:"í† í•‘",s:4},{l:"í’ë¯¸",s:5}] },
            { id: 49, type: "ëˆì½”ì¸ ", name: "ë©˜íƒ€ì™€ì´", lat: 35.8585, lng: 128.6235, badge: "ìˆ˜ì„±êµ¬", location: "ëŒ€êµ¬ ìˆ˜ì„±", flavor: "ê¹”ë”í•˜ê³  ëª¨ë˜í•œ ëˆì½”ì¸  ë¼ë©˜", stats: [{l:"ì—¼ë„",s:3},{l:"ë†ë„",s:3},{l:"ë©´",s:2},{l:"í† í•‘",s:3},{l:"í’ë¯¸",s:4}] },
            { id: 50, type: "ì‹œì˜¤ì‡¼ìœ ", name: "ìš”ë‚˜ìš”ë‚˜", lat: 35.5395, lng: 129.3115, badge: "ìš¸ì‚° ê°ì„±", location: "ìš¸ì‚° ë‚¨êµ¬", flavor: "ë¶„ìœ„ê¸° ê¹¡íŒ¨, ë§›ë„ ê¹¡íŒ¨", stats: [{l:"ì—¼ë„",s:3},{l:"ë†ë„",s:2},{l:"ë©´",s:3},{l:"í† í•‘",s:4},{l:"í’ë¯¸",s:4}] },
            { id: 51, type: "ëˆì½”ì¸ ", name: "ìš˜ì£¼ë¼ë©˜", lat: 35.5535, lng: 129.2615, badge: "ìš¸ì‚° ì„±ì§€", location: "ìš¸ì‚° ì¤‘êµ¬", flavor: "ìš¸ì‚° ë¼ë©˜ì˜ ì—­ì‚¬ ê·¸ ìì²´", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:3},{l:"ë©´",s:2},{l:"í† í•‘",s:3},{l:"í’ë¯¸",s:3}] },
            { id: 52, type: "ê¸°íƒ€", name: "ì¹´ì§€ë¼", lat: 35.2285, lng: 128.6815, badge: "ì°½ì› ë§›ì§‘", location: "ê²½ë‚¨ ì°½ì›", flavor: "ì°½ì› ìš©í˜¸ë™ì˜ ì¤„ ì„œëŠ” ë¼ë©˜ì§‘", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:4},{l:"ë©´",s:3},{l:"í† í•‘",s:4},{l:"í’ë¯¸",s:3}] },
            { id: 53, type: "ë§ˆì œíƒ„íƒ„", name: "íƒ€ì¹´ë¼", lat: 35.1565, lng: 129.0585, badge: "ìƒí™œì˜ë‹¬ì¸", location: "ë¶€ì‚° ì„œë©´", flavor: "ëª½ê¸€ëª½ê¸€í•œ ê³„ë€ê³¼ ì§„í•œ ìœ¡ìˆ˜", stats: [{l:"ì—¼ë„",s:3},{l:"ë†ë„",s:4},{l:"ë©´",s:2},{l:"í† í•‘",s:4},{l:"í’ë¯¸",s:3}] },
            { id: 54, type: "ëˆì½”ì¸ ", name: "ì½”í•˜ë£¨", lat: 35.2325, lng: 129.0835, badge: "ë¶€ì‚°ëŒ€", location: "ë¶€ì‚° ê¸ˆì •", flavor: "ëŒ€í•™ìƒë“¤ì˜ ì…ë§›ì„ ì‚¬ë¡œì¡ì€ ë§¤ìš´ ëˆì½”ì¸ ", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:3},{l:"ë©´",s:2},{l:"í† í•‘",s:3},{l:"í’ë¯¸",s:4}] },
            { id: 55, type: "ì‹œì˜¤ì‡¼ìœ ", name: "ìœ¤ì˜¥", lat: 33.5055, lng: 126.5255, badge: "ì œì£¼ 1ë“±", location: "ì œì£¼ ì‹œë‚´", flavor: "ì œì£¼ë„ë¯¼ì´ ì¸ì •í•˜ëŠ” ë‹­ ìœ¡ìˆ˜ ì‡¼ìœ ", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:3},{l:"ë©´",s:3},{l:"í† í•‘",s:4},{l:"í’ë¯¸",s:5}] },
            { id: 56, type: "ê¸°íƒ€", name: "ë…¸ì¡°ë¯¸", lat: 33.4855, lng: 126.4955, badge: "ì œì£¼ ê³µí•­", location: "ì œì£¼ ì—°ë™", flavor: "ê³µí•­ ê°€ê¸° ì „ ë“¤ëŸ¬ì•¼ í•  ëˆì½”ì¸ ", stats: [{l:"ì—¼ë„",s:3},{l:"ë†ë„",s:3},{l:"ë©´",s:2},{l:"í† í•‘",s:3},{l:"í’ë¯¸",s:3}] },
            { id: 57, type: "ëˆì½”ì¸ ", name: "ì‚°ìª¼ë©”", lat: 37.5555, lng: 126.9365, badge: "ì „êµ­êµ¬", location: "ì „êµ­ ì²´ì¸", flavor: "ì‹¤íŒ¨ ì—†ëŠ” í”„ëœì°¨ì´ì¦ˆì˜ ë§›", stats: [{l:"ì—¼ë„",s:3},{l:"ë†ë„",s:3},{l:"ë©´",s:2},{l:"í† í•‘",s:3},{l:"í’ë¯¸",s:2}] },
            { id: 58, type: "ë§ˆì œíƒ„íƒ„", name: "ì •ë¦¼ë™", lat: 36.3155, lng: 127.3685, badge: "ëŒ€ì „ ìˆ¨ì€", location: "ëŒ€ì „ ì„œêµ¬", flavor: "ì•ŒìŒì•ŒìŒ ì°¾ì•„ê°€ëŠ” ë™ë„¤ ë§›ì§‘", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:4},{l:"ë©´",s:3},{l:"í† í•‘",s:4},{l:"í’ë¯¸",s:3}] },
            { id: 59, type: "ì‹œì˜¤ì‡¼ìœ ", name: "ë©˜ì•¼ê³ ì½”ë¡œ", lat: 37.2855, lng: 127.0555, badge: "ì•„ì£¼ëŒ€", location: "ê²½ê¸° ìˆ˜ì›", flavor: "ëŒ€í•™ê°€ ì• ê°€ì„±ë¹„ì™€ ë§› ëª¨ë‘ ì¡ì€ ê³³", stats: [{l:"ì—¼ë„",s:4},{l:"ë†ë„",s:4},{l:"ë©´",s:4},{l:"í† í•‘",s:4},{l:"í’ë¯¸",s:3}] },
            { id: 60, type: "ê¸°íƒ€", name: "ë¼ë©˜ì§€ì‚°", lat: 37.5595, lng: 126.9255, badge: "ì—°ë‚¨ë™", location: "ì„œìš¸ ì—°ë‚¨", flavor: "ì§€ì‚° ì‰í”„ì˜ ì •ì„±ì´ ë“¤ì–´ê°„ í•œ ê·¸ë¦‡", stats: [{l:"ì—¼ë„",s:3},{l:"ë†ë„",s:3},{l:"ë©´",s:3},{l:"í† í•‘",s:4},{l:"í’ë¯¸",s:4}] }
                ];

        let map;
        let markers = []; 
        let currentDetailId = null;

        function initMap() {
            const container = document.getElementById('main-map');
            const options = { center: new kakao.maps.LatLng(37.5555, 126.9255), level: 8 };
            map = new kakao.maps.Map(container, options);
            map.setMaxLevel(13);

            filterMap('all');
        }

        function filterMap(type) {
            markers.forEach(marker => marker.setMap(null));
            markers = [];

            // ğŸ”¥ [ìˆ˜ì •ë¨] ë²„íŠ¼ ìŠ¤íƒ€ì¼ ë¡œì§: ë²„íŠ¼ì˜ í…ìŠ¤íŠ¸ê°€ ì•„ë‹Œ 'onclick' ì†ì„±ì„ í™•ì¸í•˜ì—¬ ìƒ‰ì¹ í•¨
            const buttons = document.querySelectorAll('.filter-btn');
            buttons.forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('onclick').includes(`'${type}'`)) {
                    btn.classList.add('active');
                }
            });

            let filteredDB;
            if (type === 'all') filteredDB = ramenDB;
            else if (type === 'ì‹œì˜¤ì‡¼ìœ ') filteredDB = ramenDB.filter(s => s.type === 'ì‹œì˜¤ì‡¼ìœ ');
            else if (type === 'ë§ˆì œíƒ„íƒ„') filteredDB = ramenDB.filter(s => s.type === 'ë§ˆì œíƒ„íƒ„');
            else if (type === 'ëˆì½”ì¸ ') filteredDB = ramenDB.filter(s => s.type === 'ëˆì½”ì¸ ');
            else filteredDB = ramenDB.filter(s => s.type === 'ê¸°íƒ€');

            filteredDB.forEach(shop => {
                const position = new kakao.maps.LatLng(shop.lat, shop.lng);
                const content = `
                    <div class="customoverlay" onclick="openDetail(${shop.id})">
                        <div class="gold-dot"></div>
                    </div>`;
                const customOverlay = new kakao.maps.CustomOverlay({
                    position: position, content: content, yAnchor: 0.5
                });
                customOverlay.setMap(map);
                markers.push(customOverlay);
            });
        }

        function openDetail(id) {
            const shop = ramenDB.find(s => s.id === id);
            if(!shop) return;
            currentDetailId = id;

            document.getElementById('detail-badge').innerText = shop.badge;
            document.getElementById('detail-title').innerHTML = `${shop.name}ë¼ë©˜ <span class="lantern-icon">ğŸ®</span>`;
            document.getElementById('detail-desc').innerText = shop.location;
            document.getElementById('detail-flavor').innerText = `"${shop.flavor}"`;
            renderStamps(shop.stats);
            checkVisitStatus(id);

            document.getElementById('detail-view').classList.remove('hidden');
            map.panTo(new kakao.maps.LatLng(shop.lat, shop.lng));
        }

        function verifyVisit() {
            if(!currentDetailId) return;
            if (!navigator.geolocation) {
                alert("ì´ ë¸Œë¼ìš°ì €ëŠ” GPSë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ğŸ˜­");
                return;
            }
            const btn = document.getElementById('btn-verify');
            const originalText = btn.innerHTML;
            btn.innerHTML = "ğŸ“¡ ìœ„ì¹˜ í™•ì¸ ì¤‘... (ì ì‹œë§Œìš”)";

            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const myLat = position.coords.latitude;
                    const myLng = position.coords.longitude;
                    const shop = ramenDB.find(s => s.id === currentDetailId);
                    const distance = getDistance(myLat, myLng, shop.lat, shop.lng);

                    if (distance <= 500) {
                        localStorage.setItem(`visited_${currentDetailId}`, 'true');
                        checkVisitStatus(currentDetailId);
                        alert(`ğŸ‰ ì¸ì¦ ì„±ê³µ!\nê°€ê²Œì™€ì˜ ê±°ë¦¬: ${Math.round(distance)}m\në„ì¥ì´ ì¾… ì°í˜”ìŠµë‹ˆë‹¤!`);
                    } else {
                        btn.innerHTML = originalText;
                        alert(`ğŸš« ì¸ì¦ ì‹¤íŒ¨!\nê°€ê²Œë‘ ë„ˆë¬´ ë©€ì–´ìš”.\ní˜„ì¬ ê±°ë¦¬: ${Math.round(distance)}m\n(500m ì•ˆìœ¼ë¡œ ì™€ì•¼ í•©ë‹ˆë‹¤!)`);
                    }
                },
                (error) => {
                    btn.innerHTML = originalText;
                    alert("ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\nìŠ¤ë§ˆíŠ¸í°ì˜ 'ìœ„ì¹˜(GPS)'ë¥¼ ì¼œì£¼ì„¸ìš”!");
                }
            );
        }

        function getDistance(lat1, lon1, lat2, lon2) {
            const R = 6371e3;
            const Ï†1 = lat1 * Math.PI / 180;
            const Ï†2 = lat2 * Math.PI / 180;
            const Î”Ï† = (lat2 - lat1) * Math.PI / 180;
            const Î”Î» = (lon2 - lon1) * Math.PI / 180;
            const a = Math.sin(Î”Ï† / 2) * Math.sin(Î”Ï† / 2) + Math.cos(Ï†1) * Math.cos(Ï†2) * Math.sin(Î”Î» / 2) * Math.sin(Î”Î» / 2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
            return R * c;
        }

        function checkVisitStatus(id) {
            const isVisited = localStorage.getItem(`visited_${id}`);
            const btn = document.getElementById('btn-verify');
            const msg = document.getElementById('passport-msg');

            if (isVisited) {
                btn.innerHTML = "âœ… ì •ë³µ ì™„ë£Œ (ì¸ì¦ë¨)";
                btn.classList.add('verified');
                btn.disabled = true;
                msg.innerText = "í›Œë¥­í•©ë‹ˆë‹¤! ë©´ì‹ ìˆ˜í–‰ì„ ì™„ë£Œí•˜ì…¨êµ°ìš”.";
            } else {
                btn.innerHTML = "ğŸ“ ê°€ê²Œ ë°©ë¬¸ ì¸ì¦í•˜ê¸° (ë„ì¥ ì¾…!)";
                btn.classList.remove('verified');
                btn.disabled = false;
                msg.innerText = "ê°€ê²Œ ê·¼ì²˜(500m)ì—ì„œ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.";
            }
        }

        function closeDetail() {
            document.getElementById('detail-view').classList.add('hidden');
        }

        function renderStamps(stats) {
            const container = document.getElementById('ramen-stats');
            container.innerHTML = '';
            stats.forEach((stat, idx) => {
                const row = document.createElement('div');
                row.className = 'stat-row';
                row.innerHTML = `<div class="stat-label">${stat.l}</div>
                    <div class="stat-stamps">${Array(5).fill(0).map((_, i) => 
                        `<div class="stamp ${i < stat.s ? 'filled' : ''}" style="transition-delay:${idx*0.05 + i*0.05}s"></div>`
                    ).join('')}</div>`;
                container.appendChild(row);
            });
        }

        function createCherryBlossoms() {
            const container = document.getElementById('cherry-container');
            for (let i = 0; i < 15; i++) {
                const petal = document.createElement('span');
                petal.style.left = `${Math.random() * 100}%`;
                petal.style.animationDuration = `${Math.random() * 5 + 5}s`;
                container.appendChild(petal);
            }
        }

        window.addEventListener('load', () => {
            initMap();
            createCherryBlossoms();
        });
    </script>
</body>

</html>
